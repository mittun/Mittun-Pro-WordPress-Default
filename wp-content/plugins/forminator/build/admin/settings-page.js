!function(t){formintorjs.define([],function(){var a=Backbone.View.extend({el:".wpmudev-forminator-forminator-settings",events:{"click .sui-side-tabs label.sui-tab-item input":"sidetabs","click .sui-sidenav .sui-vertical-tab a":"sidenav","change .sui-sidenav select.sui-mobile-nav":"sidenav_select","click .stripe-connect-modal":"open_stripe_connect_modal","click .forminator-stripe-connect":"connect_stripe"},initialize:function(){var a=this;if(t(".wpmudev-forminator-forminator-settings").length){this.$el.find(".forminator-settings-save").submit(function(i){i.preventDefault();var n=t(this),e=n.find(".wpmudev-action-done").data("nonce"),o=n.find(".wpmudev-action-done").data("action"),s=n.find(".wpmudev-action-done").data("title"),r=n.find(".wpmudev-action-done").data("isReload");a.submitForm(t(this),o,e,s,r)});var i=window.location.hash;return _.isUndefined(i)||_.isEmpty(i)||this.sidenav_go_to(i.substring(1),!0),this.render()}},render:function(){var a=this.$el.find("#recaptcha-preview");a.html('<p class="fui-loading-dialog"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:{action:"forminator_load_recaptcha_preview"}}).done(function(t){t.success&&a.html(t.data)})},submitForm:function(a,i,n,e,o){var s={},r=this;s.action="forminator_save_"+i+"_popup",s._ajax_nonce=n;var d=a.serialize()+"&"+t.param(s);t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:d,beforeSend:function(){a.find(".sui-button").addClass("sui-button-onload")},success:function(t){var a=_.template("<strong>{{ tab }}</strong> {{ Forminator.l10n.commons.update_successfully }}");Forminator.Notification.open("success",a({tab:e}),4e3),"captcha"===i&&r.render(),o&&window.location.reload()},error:function(t){Forminator.Notification.open("error",Forminator.l10n.commons.update_unsuccessfull,4e3)}}).always(function(){a.find(".sui-button").removeClass("sui-button-onload")})},sidetabs:function(t){var a=this.$(t.target),i=a.parent("label"),n=a.data("tab-menu"),e=a.closest(".sui-side-tabs"),o=e.find(".sui-tabs-menu .sui-tab-item"),s=o.find("input");o.removeClass("active"),s.removeAttr("checked"),e.find(".sui-tabs-content > div").removeClass("active"),i.addClass("active"),a.attr("checked","checked"),e.find('.sui-tabs-content div[data-tab-content="'+n+'"]').length&&e.find('.sui-tabs-content div[data-tab-content="'+n+'"]').addClass("active")},sidenav:function(a){var i=t(a.target).data("nav");i&&this.sidenav_go_to(i,!0),a.preventDefault()},sidenav_select:function(a){var i=t(a.target).val();i&&this.sidenav_go_to(i,!0),a.preventDefault()},sidenav_go_to:function(t,a){var i=this.$el.find('a[data-nav="'+t+'"]'),n=i.closest(".sui-vertical-tabs"),e=n.find(".sui-vertical-tab"),o=this.$el.find(".sui-box[data-nav]"),s=this.$el.find('.sui-box[data-nav="'+t+'"]');a&&history.pushState({selected_tab:t},"Global Settings","admin.php?page=forminator-settings&section="+t),e.removeClass("current"),o.hide(),i.parent().addClass("current"),s.show()},open_stripe_connect_modal:function(a){a.preventDefault();var i=this,n=t(a.target),e=n.data("modalImage"),o=n.data("modalImageX2"),s=n.data("modalTitle"),r=n.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);i.render_stripe_connect_modal_content(a,"small",r,{})},{title:s,image:e,image_x2:o}),!1},render_stripe_connect_modal_content:function(a,i,n,e){var o=this;e.action="forminator_stripe_settings_modal",e._ajax_nonce=n,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:e}).done(function(e){if(e&&e.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(e.data.html);var s=e.data.buttons;if(a.find(".sui-box-footer").html(""),_.each(s,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),!_.isUndefined(i)){var r=t("#forminator-stripe-popup");"normal"===i&&r.removeClass("sui-dialog-sm sui-dialog-lg"),"small"===i&&(r.addClass("sui-dialog-sm"),r.removeClass("sui-dialog-lg")),"large"===i&&(r.addClass("sui-dialog-lg"),r.removeClass("sui-dialog-sm"))}_.isUndefined(e.data.notification)||_.isUndefined(e.data.notification.type)||_.isUndefined(e.data.notification.text)||_.isUndefined(e.data.notification.duration)||(Forminator.Notification.open(e.data.notification.type,e.data.notification.text,e.data.notification.duration).done(function(){}),o.update_stripe_page(n))}})},update_stripe_page:function(a){var i={action:"forminator_stripe_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-stripe").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_stripe:function(a){a.preventDefault();var i=t(a.target);i.addClass("sui-button-onload");var n=i.data("nonce"),e=this.$el.find("#forminator-stripe-popup"),o=e.find("form"),s=o.serializeArray(),r={};return t.map(s,function(t,a){r[t.name]=t.value}),r.connect=!0,this.render_stripe_connect_modal_content(e,"small",n,r),!1}}),a=new a;return a})}(jQuery);var forminator_render_admin_captcha=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha"),a=t.data("sitekey"),i=t.data("theme");window.grecaptcha.render(t[0],{sitekey:a,theme:i,size:"normal"})},100)};